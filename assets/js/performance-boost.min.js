!function(){"use strict";({initPrefetch:function(){const e=document.querySelectorAll('a[href^="/"], a[href^="./"]'),t=new Set;e.forEach(e=>{let n;e.addEventListener("mouseenter",function(){const e=this.href;n=setTimeout(()=>{if(!t.has(e)){const n=document.createElement("link");n.rel="prefetch",n.href=e,document.head.appendChild(n),t.add(e)}},100)}),e.addEventListener("mouseleave",function(){clearTimeout(n)})})},initLazyImages:function(){const e=document.querySelectorAll("img[data-src]");if("IntersectionObserver"in window){const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.classList.remove("lazy"),n.classList.add("loaded"),t.unobserve(n)}})},{rootMargin:"50px 0px",threshold:.01});e.forEach(e=>{t.observe(e)})}else e.forEach(e=>{e.src=e.dataset.src,e.classList.remove("lazy"),e.classList.add("loaded")})},optimizeAnimations:function(){const e=document.createElement("style");e.textContent="\n        .post-card, .pagination-btn, .search-result-item {\n          will-change: transform;\n          backface-visibility: hidden;\n          perspective: 1000px;\n        }\n        \n        .post-card:hover {\n          transform: translateZ(0) translateY(-5px);\n        }\n        \n        .pagination-btn:hover {\n          transform: translateZ(0) translateY(-3px);\n        }\n        \n        .search-result-item:hover {\n          transform: translateZ(0) translateY(-2px);\n        }\n        \n        @media (prefers-reduced-motion: reduce) {\n          .post-card, .pagination-btn, .search-result-item {\n            transition: none !important;\n          }\n        }\n      ",document.head.appendChild(e)},optimizeFonts:function(){const e=document.createElement("link");e.rel="preconnect",e.href="https://fonts.googleapis.com",e.crossOrigin="anonymous",document.head.appendChild(e);const t=document.createElement("link");t.rel="preconnect",t.href="https://fonts.gstatic.com",t.crossOrigin="anonymous",document.head.appendChild(t)},cacheDOM:function(){window.domCache={body:document.body,header:document.querySelector("header"),main:document.querySelector("main"),footer:document.querySelector("footer"),postCards:document.querySelectorAll(".post-card"),searchInput:document.querySelector("#search-input"),backToTop:document.querySelector("#back-to-top")}},optimizeScroll:function(){let e=!1;function t(){const t=window.pageYOffset||document.documentElement.scrollTop,n=window.domCache.backToTop;n&&(t>300?n.classList.add("show"):n.classList.remove("show")),e=!1}window.addEventListener("scroll",function(){e||(requestAnimationFrame(t),e=!0)},{passive:!0})},optimizeSearch:function(){const e=window.domCache.searchInput;if(!e)return;let t;e.addEventListener("input",function(){clearTimeout(t),t=setTimeout(()=>{const e=this.value.trim();e.length>=2&&window.dispatchEvent(new CustomEvent("searchQuery",{detail:e}))},300)})},init:function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{this.cacheDOM(),this.initPrefetch(),this.initLazyImages(),this.optimizeAnimations(),this.optimizeFonts(),this.optimizeScroll(),this.optimizeSearch()}):(this.cacheDOM(),this.initPrefetch(),this.initLazyImages(),this.optimizeAnimations(),this.optimizeFonts(),this.optimizeScroll(),this.optimizeSearch())}}).init(),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){console.log("SW registered: ",e)}).catch(function(e){console.log("SW registration failed: ",e)})});const e=document.createElement("link");e.rel="preload",e.href="/critical.css",e.as="style",e.onload=function(){this.onload=null,this.rel="stylesheet"},document.head.appendChild(e)}();