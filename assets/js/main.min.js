document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof feather&&feather.replace();const e=document.getElementById("menu-toggle-btn"),t=document.getElementById("mobileMenu"),n=document.getElementById("mobileMenuOverlay"),o=document.body;if(e&&t){function a(){if(!t.classList.contains("active"))return;t.classList.remove("active"),n&&n.classList.remove("active"),e.setAttribute("aria-expanded","false"),o.style.overflow="";const a=e.querySelector("i");a&&(a.style.transform="rotate(-90deg)",a.style.opacity="0",setTimeout(()=>{a.setAttribute("data-feather","menu"),"undefined"!=typeof feather&&(feather.replace(),setTimeout(()=>{a.style.transform="rotate(0deg)",a.style.opacity="1"},50))},200))}e.addEventListener("click",function(){!function(){t.classList.toggle("active"),n&&n.classList.toggle("active");if(e.setAttribute("aria-expanded",t.classList.contains("active")),t.classList.contains("active")){o.style.overflow="hidden";const t=e.querySelector("i");t&&(t.style.transform="rotate(90deg)",t.style.opacity="0",setTimeout(()=>{t.setAttribute("data-feather","x"),"undefined"!=typeof feather&&(feather.replace(),setTimeout(()=>{t.style.transform="rotate(0deg)",t.style.opacity="1"},50))},200))}else{o.style.overflow="";const t=e.querySelector("i");t&&(t.style.transform="rotate(-90deg)",t.style.opacity="0",setTimeout(()=>{t.setAttribute("data-feather","menu"),"undefined"!=typeof feather&&(feather.replace(),setTimeout(()=>{t.style.transform="rotate(0deg)",t.style.opacity="1"},50))},200))}}()}),n&&n.addEventListener("click",function(){a()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.classList.contains("active")&&a()});document.querySelectorAll(".mobile-menu .nav-menu li:not(.menu-item-has-children) > a").forEach(e=>{e.addEventListener("click",function(e){setTimeout(()=>{a()},300)})});document.querySelectorAll(".mobile-menu .sub-menu li a").forEach(e=>{e.addEventListener("click",function(e){setTimeout(()=>{a()},300)})})}document.querySelectorAll(".mobile-menu .menu-item-has-children > a").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("active");const t=this.parentNode,n=t.querySelector(".sub-menu"),o=t.parentNode.querySelectorAll(".sub-menu.active"),a=t.parentNode.querySelectorAll(".menu-item-has-children > a.active");o.forEach(e=>{e!==n&&(e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{e.classList.remove("active"),e.style.opacity="",e.style.transform=""},300))}),a.forEach(e=>{e!==this&&e.classList.remove("active")}),n&&(n.classList.contains("active")?(n.style.opacity="0",n.style.transform="translateY(-10px)",setTimeout(()=>{n.classList.remove("active"),n.style.opacity="",n.style.transform=""},300)):n.classList.add("active"))})});const s=document.getElementById("search-toggle-btn"),i=document.getElementById("searchBox");console.log("Search elements:",{searchToggleBtn:s,searchBox:i}),s&&i?(console.log("Search toggle button initialized"),s.addEventListener("click",function(e){console.log("Search toggle button clicked"),e.preventDefault(),e.stopPropagation(),i.classList.toggle("active"),i.classList.contains("active")?(console.log("Search box activated"),setTimeout(()=>{const e=i.querySelector("input");e?(e.focus(),console.log("Search input focused")):console.error("No search input found in search box")},100)):console.log("Search box deactivated")})):console.error("Search toggle elements not found:",{searchToggleBtn:s?"Found":"Not found",searchBox:i?"Found":"Not found"}),document.addEventListener("click",function(e){i&&i.classList.contains("active")&&(i.contains(e.target)||e.target===s||s.contains(e.target)||(console.log("Clicked outside search area, closing search box"),i.classList.remove("active")))});const c=document.getElementById("back-to-top-btn");c&&(window.addEventListener("scroll",function(){window.pageYOffset>300?(c.style.display="inline-flex",c.style.opacity="1"):(c.style.opacity="0",setTimeout(()=>{window.pageYOffset<=300&&(c.style.display="none")},300))}),c.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),window.scrollTo({top:0,behavior:"smooth"}),window.scrollY>0){const e=Math.ceil(window.scrollY/20),t=setInterval(()=>{0===window.scrollY?clearInterval(t):window.scrollBy(0,-e)},15)}}),window.pageYOffset>300?(c.style.display="inline-flex",c.style.opacity="1"):(c.style.display="none",c.style.opacity="0"));function l(){if(!document.getElementById("placeholder-animation")){const e=document.createElement("style");e.id="placeholder-animation",e.textContent="\n        @keyframes placeholderShimmer {\n          0% { background-position: -200% 0; }\n          100% { background-position: 200% 0; }\n        }\n        .responsive-image-container.loaded {\n          background: none;\n          animation: none;\n        }\n        .image-fallback {\n          opacity: 0.7;\n          filter: grayscale(0.5);\n        }\n      ",document.head.appendChild(e)}if(document.querySelectorAll(".responsive-image-container").forEach(e=>{e.classList.contains("placeholder-added")||(e.offsetWidth,e.offsetHeight,e.style.background="linear-gradient(110deg, #ececec 8%, #f5f5f5 18%, #ececec 33%)",e.style.backgroundSize="200% 100%",e.style.animation="placeholderShimmer 1.5s linear infinite",e.classList.add("placeholder-added"))}),"loading"in HTMLImageElement.prototype)document.querySelectorAll('img.responsive-image[loading="lazy"]').forEach(e=>{e.dataset.src&&(e.addEventListener("load",function(){const e=this.closest(".responsive-image-container");e&&e.classList.add("loaded"),this.style.opacity="1"}),e.src=e.dataset.src)});else{const e=new IntersectionObserver((t,n)=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.dataset.src&&(n.addEventListener("load",function(){const e=this.closest(".responsive-image-container");e&&e.classList.add("loaded"),this.style.opacity="1"}),n.src=n.dataset.src),e.unobserve(n)}})},{rootMargin:"200px"});document.querySelectorAll("img.responsive-image[data-src]").forEach(t=>{t.style.opacity="0",t.style.transition="opacity 0.3s ease",e.observe(t)})}}function r(){document.querySelectorAll('a[href="/undefined"], a[href*="/undefined"]').forEach(e=>{e.closest(".post-card, .related-post")&&(e.href="#",e.setAttribute("data-original-link","undefined"),e.addEventListener("click",e=>{e.preventDefault()}))}),document.querySelectorAll("img.responsive-image").forEach(e=>{e.hasAttribute("data-error-handled")||(e.setAttribute("data-error-handled","true"),e.addEventListener("error",function(){this.src="/assets/img/default-post-image.svg",this.classList.add("image-fallback");const e=this.closest(".responsive-image-container");if(e&&!e.querySelector(".broken-image-label")){const t=e.getAttribute("data-title")||this.alt||"Image";if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("0.0.0.0")){const n=document.createElement("span");n.className="broken-image-label",n.textContent="Missing: "+t,e.appendChild(n)}}}))})}l(),r(),document.addEventListener("content-updated",function(){l(),r()}),window.addEventListener("load",function(){l(),r()})});